<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <meta name="viewport" content="width=device-width, initial-scale=1.0">  
    <title>Token System</title>  
    <style>  
        body {  
            font-family: Arial, sans-serif;  
            margin: 20px;  
        }  
        #userInfo {  
            position: absolute;  
            right: 20px;  
            top: 20px;  
        }  
        .section {  
            margin-top: 20px;  
            border: 1px solid #ccc;  
            padding: 10px;  
        }  
    </style>  
</head>  
<body>  

    <div id="userInfo">  
        <strong id="displayUser"></strong>  
        <h3>You have <span id="tokens"></span> tokens (ðŸ’°)</h3>  
    </div>  

    <h1>Token System</h1>  

    <div class="section" id="revealCodeSection">  
        <h2>Reveal Code</h2>  
        <button onclick="revealCode()">Reveal Code (costs 10 tokens)</button>  
        <div id="revealResult"></div>  
    </div>  

    <script>  
        const initialTokenAmounts = {  
            "Mostafa": 100,  
            "nick": 90,  
            "kasra": 0,  
            "atefi": 0  
        };  

        const codes = {  
            "Mostafa": "1234",  
            "nick": "5678",  
            "kasra": "91011",  
            "atefi": "1213"  
        };  

        let username = localStorage.getItem('username') || "Mostafa"; // Example default user  
        let tokens;  

        // Check if tokens are already saved in localStorage  
        if (localStorage.getItem(username + '_tokens')) {  
            tokens = Number(localStorage.getItem(username + '_tokens'));  
        } else {  
            // If not saved, initialize with the default amount  
            tokens = initialTokenAmounts[username] || 0;  
            localStorage.setItem(username + '_tokens', tokens);  
        }  

        document.getElementById('displayUser').innerText = `${username}:`;  
        document.getElementById('tokens').innerText = tokens;  

        function revealCode() {  
            const cost = 10;  
            if (tokens >= cost) {  
                tokens -= cost; // Decrease the token amount by 10  
                localStorage.setItem(username + '_tokens', tokens); // Save the updated token amount  
                document.getElementById('tokens').innerText = tokens; // Update displayed tokens  

                // Show the code specific to the user  
                const code = codes[username];  
                document.getElementById('revealResult').innerHTML = `Your code is: <strong>${code}</strong>`;  
            } else {  
                document.getElementById('revealResult').innerText = 'Not enough tokens!';  
            }  
        }  
    </script>  
</body>  
</html>
